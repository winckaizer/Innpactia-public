<div class="card mb-3">
	<div class="card-header">
		<div class="row mt-2">
			<div class="col-sm-10">
				<h5>Formulario de Reparaciones</h5>
			</div>
			<div class="col-sm-2 text-end">
				<button class="btn btn-sm btn-primary ms-auto">
					<i class="fas fa-plus"></i> Nuevo
				</button>
			</div>
		</div>
	</div>
	<form (ngSubmit)="sendRepairData()" [formGroup]="frmRepair">
		<div class="card-body">
			<div class="row">
				<div class="col-sm-12 col-md-6 col-lg-6">
					<div class="mb-3">
						<label class="form-label" for="clientSearch">Cliente</label>
						<ng-select [(ngModel)]="selectedClient" formControlName="clientId"
							(close)="changeClientPhone(selectedClient)" >
							<ng-option *ngFor="let client of selectClient" [value]="client.id">{{client.fullname}}
							</ng-option>
						</ng-select>
					</div>
				</div>
				<div class="col-sm-12 col-md-6 col-lg-6">
					<div class="mb-3">
						<label class="form-label" for="phoneSearch">Dispositivo</label>
						<ng-select [(ngModel)]="selectedPhone" formControlName="phoneId" #phoneSelect>
							<ng-option *ngFor="let phone of selectPhone" [value]="phone.id">{{phone.brand + " " +
								phone.model + " " + phone.serial}}</ng-option>
						</ng-select>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-6 col-lg-6">
					<div class="mb-3">
						<label class="form-label" for="dateIn">Fecha de Recepcion</label>
						<input type="date" class="form-control" formControlName="dateIn" id="dateIn"/>
					</div>
				</div>
				<div class="col-sm-12 col-md-6 col-lg-6">
					<div class="mb-3">
						<label class="form-label" for="dateOut">Fecha de Entrega</label>
						<input type="date" class="form-control" formControlName="dateOut" id="dateOut" />
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-12 col-lg-12">
					<div class="mb-3">
						<label class="form-label" for="failure">Falla Precentada</label>
						<input type="text" class="form-control" formControlName="failure" id="failure" />
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-12 col-lg-12">
					<div class="mb-3">
						<label class="form-label" for="notes">Observaciones</label>
						<textarea class="form-control" formControlName="notes" id="notes"></textarea>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-12 col-md-12 col-lg-12">
					<div class="mb-3">
						<label class="form-label" for="status">Estatus</label>
						<select formControlName="status" class="form-control" name="" id="status">
							<option *ngFor="let s of PHONE_STATUS; let i = index" value="{{i}}">{{s}}</option>
						</select>
					</div>
				</div>
			</div>
		</div>
		<div class="card-footer text-end">
			<button type="reset" class="btn btn-secondary btn-sm me-2" data-bs-dismiss="modal">
				<i class="fas fa-times"></i> Cancelar
			</button>
			<button type="submit" class="btn btn-primary btn-sm">
				<i class="fas fa-save"></i> Guardar
			</button>
		</div>
	</form>
</div>

<ng-template #phoneModal let-modal>
	<app-phone [modal]=modal [client]=onlyClient></app-phone>
</ng-template>
